### 캐스케이드 슬레이브

하나의 마스터 노드에 연결된 슬레이브 노드가 많다면 마스터 노드와의 I/O 문제가 발생하기 때문에 중앙 집중형 구조가 아닌 트리 구조의 슬레이브 구조가 권장된다.
트리구조로 슬레이브를 구성하기 위해서는 중간 슬레이브에 `log_slave_updates=1`옵션을 활성화 해야 한다. 그래야지만 복제된 변경 사항을 중간 슬레이브 서버에서 자신의 빈로그에 기록하여 하위 슬레이브가 이를 읽어갈 수 있다. 하지만 이 방식은 중간 슬레이브를 잃게 되면 해당 중간 슬레이브의 하위 슬레이브들이 최신 정보를 가질 수 없다는 단점이 존재한다.

### 중간 슬레이브를 위한 복제 성능 향상

relay_log : 슬레이브 서버가 마스터 서버의 변경 사항을 임시로 저장하고 처리하는 데 사용되는 로그
<중간 슬레이브에서 복제 성능 향상을 위한 옵션>
`skip-innodb` : 테이블 생성 시 InnoDB로 생성하더라도 무시한다.
`default-storage-engine = blackhole` : 블랙홀을 기본 엔진으로 사용한다.
위의 두 옵션을 사용하게 되면 중간 슬레이브는 데이터를 저장하지 않고 로그를 캡처하여 슬레이브에 전달만 하기 때문에 복제 성능이 향상된다.

### 복제의 제한
복제할 데이터 베이스를 제한할 수 있다.
1. 설정 파일을 통한 복제 데이터베이스 제한
   설정 파일에 `replication_do_db = 디비명` 옵션을 복제 허용할 디비마다 새로운 행으로 추가해준다.
   설정 파일에 `replication_do_table = 디비명.테이블병` 옵션을 복제 허용할 테이블마다 새로운 행으로 추가해준다.
2. 실행 중 명령어를 통한 설정
   ```sql
   stop slave;
   set global replication_do_db = "디비1,디비2,...,디비n";
   set global replication_do_table = "디비1.테이블1,디비1.테이블2,...,디비n.테이블n";
   start slave;
   ```
3. replication_ignore_db, replication_ignore_table 은 반대로 복제하지 않을 디비와 테이블을 설정한다.
4. replication_wild_do/ignore_db/table : db 또는 table 명에 %(와일드카드)를 사용할 수 있다.

### 여러 대역에 걸친 슬레이브 설계
거리에 따른 지연율과 대역폭을 고려해야 한다.

### SSL 복제
별도의 인증기관을 통한 CA 생성 또는 openssl을 통해 인증서를 만든 후
마스터와 클라이언트에 `ssl-ca`,  `ssl-cert`,  `ssl-key` 옵션을 입력하여 ssl설정을 적용할 수 있다. 또는 stunnel을 사용해도 된다.
